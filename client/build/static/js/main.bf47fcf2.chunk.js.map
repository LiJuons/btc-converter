{"version":3,"sources":["app/components/CurrencyList/index.js","app/components/DropDown/index.js","app/components/Loader/index.js","app/components/ErrorMsg/index.js","app/containers/Main/index.js","app/containers/App/index.js","index.js"],"names":["CurrencyList","_ref","btc","prices","displayList","toggleCurrency","react_default","a","createElement","className","Object","entries","map","currency","i","key","style","display","description","onClick","rawHTML","symbol","React","dangerouslySetInnerHTML","__html","num","rate_float","Math","round","toFixed","replace","DropDown","props","dropdownList","item","Loader","ErrorMsg","err","Main","state","showDropdown","loading","error","getCurrencies","fetch","then","res","json","displayOptions","_this","length","keys","bpi","setState","catch","toShow","toConsumableArray","filter","objectSpread","toggleDropdown","handleChange","e","value","target","Number","slice","_this2","this","updateSchedule","schedule","scheduleJob","_this3","_this$state","type","placeholder","onChange","onFocus","components_Loader","components_ErrorMsg","components_CurrencyList","components_DropDown","Component","App","containers_Main","ReactDOM","render","containers_App","document","getElementById"],"mappings":"0ZA+BeA,eAxBM,SAAAC,GAAA,IAAEC,EAAFD,EAAEC,IAAKC,EAAPF,EAAOE,OAAQC,EAAfH,EAAeG,YAAaC,EAA5BJ,EAA4BI,eAA5B,OACnBC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBAEZN,GAAWO,OAAOC,QAAQR,GAAQS,IAAI,SAACC,EAAUC,GAAX,OACrCR,EAAAC,EAAAC,cAAA,OAAKO,IAAKD,EACRL,UAAU,iBACVO,MAAOZ,EAAYU,GAAK,CAACG,QAAS,QAAU,CAACA,QAAS,SAEtDX,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cAAcI,EAAS,GAAGK,aACzCZ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aAAaU,QAAS,kBAAMd,EAAeS,GAAG,KAA7D,MAGFR,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cAlBLW,EAkB6BP,EAAS,GAAGQ,OAlB7BC,IAAMd,cAAc,OAAQ,CAAEe,wBAAyB,CAAEC,OAAQJ,OAmBvFd,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cAjBHgB,EAiB6BZ,EAAS,GAAGa,YAAcxB,GAAO,MAjBlDyB,KAAKC,MAAMH,EAAM,OAAU,QAAQI,QAAQ,GAAGC,QAAQ,oBAAqB,WAAxF,IAACL,EAFFL,OCaLW,SAbE,SAACC,GAAD,OACf1B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBAEXuB,EAAMC,aAAarB,IAAI,SAACsB,EAAMpB,GAAP,OACnBoB,GACA5B,EAAAC,EAAAC,cAAA,OAAKO,IAAKD,EAAGK,QAAS,kBAAMa,EAAM3B,eAAeS,GAAG,KAClDR,EAAAC,EAAAC,cAAA,iBADF,IACkB0B,QCAbC,SANA,kBACb7B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WAAf,iBCIW2B,SANE,SAAAnC,GAAA,IAAEoC,EAAFpC,EAAEoC,IAAF,OACf/B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACZ4B,KC4HUC,6MAxHbC,MAAM,CACJrC,IAAK,GACLC,OAAQ,GACRC,YAAa,GACb6B,aAAc,GACdO,cAAc,EACdC,SAAS,EACTC,MAAO,MAaTC,cAAgB,WACdC,MAAM,eACHC,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SACdF,KAAK,SAAAE,GACJ,IAAMC,EACJC,EAAKV,MAAMnC,YAAY8C,OAAO,EAAID,EAAKV,MAAMnC,YAC3CM,OAAOyC,KAAKJ,EAAKK,KAAKxC,IAAI,SAAAsB,GAAI,OAAK,IAEvCe,EAAKI,SAAS,CACZlD,OAAQ4C,EAAKK,IACbhD,YAAa4C,EACbP,SAAS,MAEVa,MAAM,SAACjB,GAAD,OACPY,EAAKI,SAAS,CACZZ,SAAS,EACTC,MAAO,+DAIjBrC,eAAiB,SAACS,EAAGyC,GACnB,IAAInD,EAAWM,OAAA8C,EAAA,EAAA9C,CAAOuC,EAAKV,MAAMnC,aAC7B6B,EAAYvB,OAAA8C,EAAA,EAAA9C,CAAOuC,EAAKV,MAAMN,cAC7BO,EAAgBS,EAAKV,MAArBC,aACLpC,EAAYU,GAAKyC,EAGftB,EAAanB,GADXyC,EACc,KAEA7C,OAAOyC,KAAKF,EAAKV,MAAMpC,QAAQW,GAGI,IAAjDmB,EAAawB,OAAO,SAAAvB,GAAI,OAAU,MAANA,IAAYgB,SAC1CjB,EAAe,GACfO,GAAe,GAGjBS,EAAKI,SAAL3C,OAAAgD,EAAA,EAAAhD,CAAA,GAAmBuC,EAAKV,MAAxB,CAA+BnC,cAAa6B,eAAcO,qBAG5DmB,eAAiB,SAACJ,GAAYN,EAAKI,SAAS,CAACb,aAAce,OAE3DK,aAAe,SAACC,GAAM,IACfC,EAASD,EAAEE,OAAXD,MAELA,GADAA,EAASE,OAAOF,IAAkB,OAARA,GAAkC,MAAlBA,EAAMG,OAAO,GAAYH,EAAQA,EAAMG,MAAM,GAAI,IAC7Ef,OAAO,GAAKY,EAAQA,EAAMG,MAAM,GAAI,GAClDhB,EAAKI,SAAS,CAACnD,IAAK4D,wFAxDF,IAAAI,EAAAC,KAClBA,KAAKC,eAAiBC,IAASC,YAAY,eAAgB,WACzDJ,EAAKvB,+DAKPwB,KAAKxB,iDAoDE,IAAA4B,EAAAJ,KAAAK,EACwEL,KAAK5B,MAA7ErC,EADAsE,EACAtE,IAAKC,EADLqE,EACKrE,OAAQC,EADboE,EACapE,YAAa6B,EAD1BuC,EAC0BvC,aAAcO,EADxCgC,EACwChC,aAAcC,EADtD+B,EACsD/B,QAASC,EAD/D8B,EAC+D9B,MAEtE,OACEpC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aAEfH,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,SACEC,UAAU,YACVgE,KAAK,OACLC,YAAY,kBACZZ,MAAOK,KAAK5B,MAAMrC,IAClByE,SAAUR,KAAKP,aACfgB,QAAS,kBAAML,EAAKlB,SAAS,CAACnD,IAAK,SAKrCuC,EAAUnC,EAAAC,EAAAC,cAACqE,EAAD,MACRnC,EAAQpC,EAAAC,EAAAC,cAACsE,EAAD,CAAUzC,IAAKK,IACvBpC,EAAAC,EAAAC,cAACuE,EAAD,CACE7E,IAAKA,EACLC,OAAQA,EACRC,YAAaA,EACbC,eAAgB8D,KAAK9D,iBAI3BC,EAAAC,EAAAC,cAAA,WAEIyB,EAAaiB,OAAO,GACpB5C,EAAAC,EAAAC,cAAA,OACEC,UAAU,kBACVU,QAAS,kBAAMoD,EAAKZ,gBAAgBnB,KAFtC,oBAQAA,GACAlC,EAAAC,EAAAC,cAACwE,EAAD,CAAU/C,aAAcA,EAAc5B,eAAgB8D,KAAK9D,0BAhHpD4E,aCMJC,0LARX,OACE5E,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBACbH,EAAAC,EAAAC,cAAC2E,EAAD,cAJUF,cCClBG,IAASC,OAAO/E,EAAAC,EAAAC,cAAC8E,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.bf47fcf2.chunk.js","sourcesContent":["import React from 'react';\nimport './CurrencyList.scss';\n\nconst renderHTML = (rawHTML) => React.createElement(\"span\", { dangerouslySetInnerHTML: { __html: rawHTML } });\n\nconst formatNumber = (num) => ((+(Math.round(num + \"e+2\")  + \"e-2\")).toFixed(2).replace(/\\d(?=(\\d{3})+\\.)/g, '$&,'));\n\nconst CurrencyList = ({btc, prices, displayList, toggleCurrency}) => (\n  <div className=\"currency-container\">\n  {\n    (prices) && Object.entries(prices).map((currency, i) => (\n      <div key={i} \n        className=\"currency-rates\"\n        style={displayList[i] ? {display: \"flex\"} : {display: \"none\"}} \n      >\n        <div className=\"curr-title\">\n          <div className=\"curr-descr\">{currency[1].description}</div>\n          <div className=\"curr-close\" onClick={() => toggleCurrency(i, false)}>X</div>\n        </div>\n\n        <div className=\"curr-status\">\n          <div className=\"curr-sign\">{renderHTML(currency[1].symbol)}</div>\n          <div className=\"curr-rate\">{formatNumber(currency[1].rate_float * (btc || 0))}</div>\n        </div>\n\n      </div>\n    ))\n  }\n  </div>\n);\n\nexport default CurrencyList;","import React from 'react';\nimport './DropDown.scss';\n\nconst DropDown = (props) => (\n  <div className=\"dropdown-list\" >\n    {  \n      props.dropdownList.map((item, i) => (\n          item &&\n          <div key={i} onClick={() => props.toggleCurrency(i, true)}>\n            <span>+</span> {item}\n          </div>\n      ))\n    }\n  </div>\n);\n\nexport default DropDown;","import React from 'react';\nimport './Loader.scss';\n\nconst Loader = () => (\n  <div className=\"loader-container\">\n    <div className=\"loading\">Loading...</div>\n  </div>\n);\n\nexport default Loader;","import React from 'react';\nimport './ErrorMsg.scss';\n\nconst ErrorMsg = ({err}) => (\n  <div className=\"error-msg\">\n    {err}\n  </div>\n);\n\nexport default ErrorMsg;","import React, { Component } from 'react';\nimport schedule from 'node-schedule';\nimport './Main.scss';\nimport CurrencyList from '../../components/CurrencyList/';\nimport DropDown from '../../components/DropDown/';\nimport Loader from '../../components/Loader/';\nimport ErrorMsg from '../../components/ErrorMsg/';\n\nclass Main extends Component {\n  state={\n    btc: '',\n    prices: {},\n    displayList: [],\n    dropdownList: [],\n    showDropdown: false,\n    loading: true,\n    error: ''\n  }\n\n  componentDidMount() {\n    this.updateSchedule = schedule.scheduleJob('15 * * * * *', () => {\n      this.getCurrencies();\n    });\n  }\n\n  componentWillMount() {\n    this.getCurrencies();\n  }\n\n  getCurrencies = () => {\n    fetch('/currencies')\n      .then(res => res.json())\n        .then(json => {\n          const displayOptions =\n            this.state.displayList.length>0 ? this.state.displayList\n            : Object.keys(json.bpi).map(item => (true));\n\n          this.setState({\n            prices: json.bpi,\n            displayList: displayOptions,\n            loading: false\n          });\n        }).catch((err) => \n          this.setState({\n            loading: false, \n            error: 'Failed to fetch data. Please try refreshing the page.'\n          }));\n  }\n\n  toggleCurrency = (i, toShow) => {\n    let displayList = [...this.state.displayList];\n    let dropdownList = [...this.state.dropdownList];\n    let {showDropdown} = this.state;\n    displayList[i] = toShow;\n\n    if (toShow) {\n      dropdownList[i]=null;\n    } else {\n      dropdownList[i]=Object.keys(this.state.prices)[i];\n    }\n\n    if (dropdownList.filter(item => item!=null).length===0) {\n      dropdownList = [];\n      showDropdown = false;\n    }\n\n    this.setState({ ...this.state, displayList, dropdownList, showDropdown });\n  }\n\n  toggleDropdown = (toShow) => {this.setState({showDropdown: toShow});}\n\n  handleChange = (e) => {\n    let {value} = e.target;\n    value = (Number(value) || value==='0.' || value.slice(-1)==='0') ? value : value.slice(0, -1);\n    value = value.length<16 ? value : value.slice(0, -1);\n    this.setState({btc: value});\n  }\n\n  render() {\n    const {btc, prices, displayList, dropdownList, showDropdown, loading, error} = this.state;\n\n    return (\n      <div className=\"main-container\">\n        <div className=\"btc-icon\" />\n\n        <div>\n          <div>Bitcoin</div>\n          <input \n            className=\"btc-input\" \n            type=\"text\" \n            placeholder=\"Enter BTC value\"\n            value={this.state.btc} \n            onChange={this.handleChange} \n            onFocus={() => this.setState({btc: ''})}\n          />\n        </div>\n\n        { \n          loading ? <Loader />\n          : error ? <ErrorMsg err={error} />\n          : <CurrencyList \n              btc={btc} \n              prices={prices} \n              displayList={displayList}  \n              toggleCurrency={this.toggleCurrency}\n            />\n        }\n\n        <div>\n          {\n            dropdownList.length>0 && \n            <div \n              className=\"dropdown-button\"\n              onClick={() => this.toggleDropdown(!showDropdown)}\n            >\n              Other Currencies\n            </div>\n          }\n          {\n            showDropdown && \n            <DropDown dropdownList={dropdownList} toggleCurrency={this.toggleCurrency} />\n          }\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default Main;\n","import React, { Component } from 'react';\nimport Main from '../Main/';\nimport './App.scss';\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"app-container\">\n        <Main />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app/containers/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}